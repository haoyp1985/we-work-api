# å‰åç«¯æ¥å£è”è°ƒè®¡åˆ’

## ğŸ¯ è”è°ƒç›®æ ‡

å®ç°å‰åç«¯å®Œæ•´çš„æ¥å£è”è°ƒï¼Œç¡®ä¿ï¼š
- ç”¨æˆ·è®¤è¯ç™»å½•åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- è´¦å·ç®¡ç†CRUDæ“ä½œå®Œæ•´å¯ç”¨
- ç›‘æ§ä¸­å¿ƒæ•°æ®å®æ—¶å±•ç¤º
- å‘Šè­¦ç®¡ç†åŠŸèƒ½æ­£å¸¸å“åº”

## ğŸ” å½“å‰çŠ¶æ€åˆ†æ

### å‰ç«¯é…ç½®
- **è¿è¡Œç«¯å£**: 3000
- **APIä»£ç†**: `/api` -> `http://localhost:18080`
- **è®¤è¯æ–¹å¼**: Bearer Token
- **è¯·æ±‚æ‹¦æˆªå™¨**: å·²é…ç½® Authorization header

### åç«¯é…ç½®
- **ç½‘å…³ç«¯å£**: 8080 âŒ (éœ€è¦ä¿®æ”¹ä¸º18080)
- **è´¦å·æœåŠ¡**: 8081
- **æ¶ˆæ¯æœåŠ¡**: 8082
- **é…ç½®ä¸­å¿ƒ**: Nacos (28848)

### âš ï¸ å‘ç°çš„é—®é¢˜
1. **ç«¯å£ä¸åŒ¹é…**: å‰ç«¯ä»£ç†åˆ°18080ï¼Œåç«¯ç½‘å…³è¿è¡Œåœ¨8080
2. **æœåŠ¡å¯åŠ¨é¡ºåº**: éœ€è¦å…ˆå¯åŠ¨Nacosï¼Œå†å¯åŠ¨å„ä¸ªå¾®æœåŠ¡
3. **æ•°æ®åº“åˆå§‹åŒ–**: éœ€è¦æ‰§è¡ŒSQLè„šæœ¬åˆ›å»ºè¡¨ç»“æ„

## ğŸ“‹ è”è°ƒæ­¥éª¤

### Phase 1: ç¯å¢ƒå‡†å¤‡
- [ ] ä¿®å¤ç«¯å£é…ç½®ä¸åŒ¹é…é—®é¢˜
- [ ] å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡(MySQL, Redis, Nacos)
- [ ] åˆ›å»ºæ•°æ®åº“å’Œè¡¨ç»“æ„
- [ ] å¯åŠ¨åç«¯å¾®æœåŠ¡

### Phase 2: è®¤è¯è”è°ƒ
- [ ] å®ç°ç™»å½•æ¥å£è”è°ƒ
- [ ] æµ‹è¯•JWT TokenéªŒè¯
- [ ] éªŒè¯æƒé™æ§åˆ¶åŠŸèƒ½
- [ ] æµ‹è¯•ç™»å‡ºåŠŸèƒ½

### Phase 3: æ ¸å¿ƒåŠŸèƒ½è”è°ƒ
- [ ] è´¦å·ç®¡ç†CRUDæ¥å£
- [ ] ç›‘æ§æ•°æ®æ¥å£
- [ ] å‘Šè­¦ç®¡ç†æ¥å£
- [ ] æ–‡ä»¶ä¸Šä¼ æ¥å£

### Phase 4: é«˜çº§åŠŸèƒ½è”è°ƒ
- [ ] å®æ—¶æ•°æ®æ¨é€(WebSocket)
- [ ] åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
- [ ] æ‰¹é‡æ“ä½œæ¥å£
- [ ] å¯¼å…¥å¯¼å‡ºåŠŸèƒ½

## ğŸ›  éœ€è¦ä¿®å¤çš„é…ç½®

### 1. ç½‘å…³ç«¯å£é…ç½®
**æ–‡ä»¶**: `backend/gateway-service/nacosé…ç½®`
```yaml
# ä¿®æ”¹å‰
server:
  port: 8080

# ä¿®æ”¹å
server:
  port: 18080
```

### 2. å‰ç«¯APIåŸºç¡€åœ°å€
**æ–‡ä»¶**: `frontend/admin-web/src/utils/request.ts`
```typescript
// å½“å‰é…ç½®
baseURL: import.meta.env.VITE_APP_BASE_API || '/api'

// Viteä»£ç†é…ç½®
'/api' -> 'http://localhost:18080'
```

### 3. è·¨åŸŸé…ç½®
**åç«¯ç½‘å…³éœ€è¦é…ç½®**:
```yaml
spring:
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOrigins: "http://localhost:3000"
            allowedMethods: "*"
            allowedHeaders: "*"
            allowCredentials: true
```

## ğŸ“Š APIæ¥å£æ˜ å°„

### è®¤è¯ç›¸å…³
| å‰ç«¯API | åç«¯è·¯ç”± | æ§åˆ¶å™¨ | çŠ¶æ€ |
|---------|----------|---------|------|
| `POST /api/auth/login` | `/api/account/auth/login` | AccountController | âœ… å·²å®ç° |
| `POST /api/auth/logout` | `/api/account/auth/logout` | AccountController | â³ å¾…å®ç° |
| `GET /api/auth/userinfo` | `/api/account/auth/userinfo` | AccountController | â³ å¾…å®ç° |

### è´¦å·ç®¡ç†
| å‰ç«¯API | åç«¯è·¯ç”± | æ§åˆ¶å™¨ | çŠ¶æ€ |
|---------|----------|---------|------|
| `GET /api/accounts` | `/api/account/accounts` | AccountController | âœ… å·²å®ç° |
| `POST /api/accounts` | `/api/account/accounts` | AccountController | âœ… å·²å®ç° |
| `PUT /api/accounts/{id}` | `/api/account/accounts/{id}` | AccountController | âœ… å·²å®ç° |
| `DELETE /api/accounts/{id}` | `/api/account/accounts/{id}` | AccountController | âœ… å·²å®ç° |

### ç›‘æ§æ•°æ®
| å‰ç«¯API | åç«¯è·¯ç”± | æ§åˆ¶å™¨ | çŠ¶æ€ |
|---------|----------|---------|------|
| `GET /api/monitor/statistics` | `/api/account/monitor/statistics` | MonitorController | â³ å¾…å®ç° |
| `GET /api/monitor/accounts` | `/api/account/monitor/accounts` | MonitorController | â³ å¾…å®ç° |
| `GET /api/monitor/health` | `/api/account/monitor/health` | MonitorController | â³ å¾…å®ç° |

### å‘Šè­¦ç®¡ç†
| å‰ç«¯API | åç«¯è·¯ç”± | æ§åˆ¶å™¨ | çŠ¶æ€ |
|---------|----------|---------|------|
| `GET /api/alerts` | `/api/account/alerts` | AlertController | â³ å¾…å®ç° |
| `POST /api/alerts/handle` | `/api/account/alerts/handle` | AlertController | â³ å¾…å®ç° |

## ğŸ® æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
- æ¯ä¸ªAPIæ¥å£çš„åŸºæœ¬åŠŸèƒ½æµ‹è¯•
- å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†æµ‹è¯•
- æƒé™æ§åˆ¶æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- å‰åç«¯æ•°æ®æµæµ‹è¯•
- è®¤è¯æˆæƒæµç¨‹æµ‹è¯•
- å®æ—¶æ•°æ®æ›´æ–°æµ‹è¯•

### 3. ç«¯åˆ°ç«¯æµ‹è¯•
- ç”¨æˆ·å®Œæ•´æ“ä½œæµç¨‹æµ‹è¯•
- å¼‚å¸¸æƒ…å†µå¤„ç†æµ‹è¯•
- æ€§èƒ½å’Œå¹¶å‘æµ‹è¯•

## ğŸš€ å¯åŠ¨é¡ºåº

1. **åŸºç¡€è®¾æ–½**
   ```bash
   # å¯åŠ¨æ•°æ®åº“å’Œç¼“å­˜
   docker-compose up -d mysql redis
   
   # å¯åŠ¨Nacos
   docker-compose up -d nacos
   ```

2. **åç«¯æœåŠ¡**
   ```bash
   # å¯åŠ¨ç½‘å…³æœåŠ¡
   cd backend/gateway-service
   mvn spring-boot:run
   
   # å¯åŠ¨è´¦å·æœåŠ¡
   cd backend/account-service  
   mvn spring-boot:run
   ```

3. **å‰ç«¯æœåŠ¡**
   ```bash
   cd frontend/admin-web
   npm run dev
   ```

## ğŸ“ è”è°ƒè®°å½•

| æ—¥æœŸ | åŠŸèƒ½æ¨¡å— | æµ‹è¯•ç»“æœ | é—®é¢˜è®°å½• | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|----------|----------|
| å¾…å¡«å†™ | ç™»å½•è®¤è¯ | - | - | - |
| å¾…å¡«å†™ | è´¦å·ç®¡ç† | - | - | - |
| å¾…å¡«å†™ | ç›‘æ§ä¸­å¿ƒ | - | - | - |
| å¾…å¡«å†™ | å‘Šè­¦ç®¡ç† | - | - | - |

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] ç”¨æˆ·èƒ½æ­£å¸¸ç™»å½•å’Œç™»å‡º
- [ ] è´¦å·åˆ—è¡¨èƒ½æ­£ç¡®æ˜¾ç¤ºå’Œåˆ†é¡µ
- [ ] å¯ä»¥åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤è´¦å·
- [ ] ç›‘æ§æ•°æ®èƒ½å®æ—¶æ›´æ–°
- [ ] å‘Šè­¦ä¿¡æ¯èƒ½æ­£ç¡®å¤„ç†

### æ€§èƒ½éªŒæ”¶
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- [ ] APIå“åº”æ—¶é—´ < 500ms
- [ ] æ”¯æŒå¹¶å‘ç”¨æˆ·æ•° >= 100

### å…¼å®¹æ€§éªŒæ”¶
- [ ] Chromeæµè§ˆå™¨å…¼å®¹
- [ ] Safariæµè§ˆå™¨å…¼å®¹
- [ ] ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€æ­£å¸¸