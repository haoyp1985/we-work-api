# å®Œæ•´ä¸šåŠ¡æ¨¡å—å±‚è®¾è®¡ - ä¿ç•™åŸæœ‰å¤æ‚åº¦

## âš ï¸ é‡è¦è¯´æ˜

**æ‚¨æå‡ºçš„é—®é¢˜éå¸¸æ­£ç¡®ï¼** åœ¨v3.0ä¼˜åŒ–è®¾è®¡ä¸­ï¼Œæˆ‘é”™è¯¯åœ°ç®€åŒ–äº†ä¸šåŠ¡æ¨¡å—å±‚ã€‚ä¼å¾®å¹³å°å’ŒAIæ™ºèƒ½ä½“å¹³å°çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç»å¯¹ä¸èƒ½ç®€åŒ–ï¼Œè¿™äº›æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚

**ç”Ÿå‘½å‘¨æœŸé—­ç¯è·Ÿè¸ª**å’Œ**æ™ºèƒ½ä½“é…ç½®è°ƒåº¦**æ˜¯ä¼ä¸šçº§ç³»ç»Ÿçš„å…³é”®èƒ½åŠ›ï¼Œå¿…é¡»å®Œæ•´ä¿ç•™ï¼

---

## ğŸ¯ ä¸šåŠ¡æ¨¡å—å±‚é‡æ–°è®¾è®¡åŸåˆ™

### 1. æ ¸å¿ƒåŸåˆ™ä¿®æ­£
1. **ç»Ÿä¸€æ¶æ„ä¼˜åŒ–** âœ… - èº«ä»½ã€å®‰å…¨ã€é…ç½®ã€å‘Šè­¦å±‚ç»Ÿä¸€
2. **ä¸šåŠ¡å¤æ‚åº¦ä¿ç•™** âœ… - ä¼å¾®9ç§çŠ¶æ€ã€AIè°ƒåº¦ç­–ç•¥ã€ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ªå®Œæ•´ä¿ç•™  
3. **æ€§èƒ½ä¼˜åŒ–ä¿ç•™** âœ… - åˆ†åŒºè¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹
4. **åŠŸèƒ½å®Œæ•´æ€§** âœ… - æ‰€æœ‰åŸæœ‰åŠŸèƒ½100%ä¿ç•™

### 2. é‡æ–°å®¡è§†çš„ä¸šåŠ¡éœ€æ±‚

#### ğŸ”„ **ç”Ÿå‘½å‘¨æœŸé—­ç¯è·Ÿè¸ªéœ€æ±‚**
- **ä¼å¾®è´¦å·**: 9ç§çŠ¶æ€å®Œæ•´è·Ÿè¸ªï¼ŒçŠ¶æ€å˜æ›´å†å²ï¼ŒæŒç»­æ—¶é—´åˆ†æ
- **AIæ™ºèƒ½ä½“**: ç‰ˆæœ¬ç®¡ç†ï¼Œè°ƒåº¦å†å²ï¼Œæ€§èƒ½ç»Ÿè®¡ï¼Œè´¨é‡è¯„ä¼°
- **æ¶ˆæ¯æµè½¬**: ä»åˆ›å»ºâ†’å‘é€â†’é€è¾¾â†’å·²è¯»çš„å®Œæ•´é“¾è·¯è·Ÿè¸ª
- **å¹³å°è°ƒåº¦**: è´Ÿè½½å‡è¡¡ï¼Œæ•…éšœè½¬ç§»ï¼Œæ€§èƒ½ç›‘æ§

#### ğŸ¤– **æ™ºèƒ½ä½“é…ç½®å’Œè°ƒåº¦éœ€æ±‚**  
- **å¤šå¹³å°ç®¡ç†**: difyã€cozeã€fastgptç­‰å¹³å°ç»Ÿä¸€ç®¡ç†
- **è°ƒåº¦ç­–ç•¥**: round_robinã€least_connectionsã€response_timeã€cost_optimized
- **é…ç½®ç®¡ç†**: æ¨¡å‹é…ç½®ã€æç¤ºè¯é…ç½®ã€å·¥ä½œæµé…ç½®ã€èµ„æºé…ç½®
- **ç‰ˆæœ¬ç®¡ç†**: æ™ºèƒ½ä½“ç‰ˆæœ¬ã€é…ç½®ç‰ˆæœ¬ã€éƒ¨ç½²å†å²
- **æ€§èƒ½ç›‘æ§**: å“åº”æ—¶é—´ã€æˆåŠŸç‡ã€Tokenä½¿ç”¨ã€è´¹ç”¨ç»Ÿè®¡

---

## ğŸ—ï¸ AIæ™ºèƒ½ä½“å¹³å°å®Œæ•´è®¾è®¡ (20+å¼ è¡¨)

### 3.1 å¹³å°ç®¡ç†å±‚

```sql
-- 1. å¹³å°ç®¡ç†è¡¨
CREATE TABLE ai_platforms (
    id VARCHAR(36) PRIMARY KEY COMMENT 'å¹³å°ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    
    platform_name VARCHAR(50) NOT NULL COMMENT 'å¹³å°åç§°',
    platform_type ENUM('dify', 'coze', 'fastgpt', 'custom') NOT NULL COMMENT 'å¹³å°ç±»å‹',
    base_url VARCHAR(500) NOT NULL COMMENT 'å¹³å°åŸºç¡€URL',
    auth_type ENUM('bearer', 'apikey', 'custom') NOT NULL COMMENT 'è®¤è¯ç±»å‹',
    auth_config JSON NOT NULL COMMENT 'è®¤è¯é…ç½®',
    
    -- å¹³å°èƒ½åŠ›é…ç½® (ä¿ç•™å¤æ‚åº¦)
    capabilities JSON DEFAULT NULL COMMENT 'å¹³å°èƒ½åŠ›é…ç½®',
    rate_limits JSON DEFAULT NULL COMMENT 'é™æµé…ç½®',
    priority INT DEFAULT 100 COMMENT 'ä¼˜å…ˆçº§(æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜)',
    
    -- çŠ¶æ€ç®¡ç†
    status ENUM('active', 'inactive', 'maintenance') DEFAULT 'active' COMMENT 'çŠ¶æ€',
    health_check_url VARCHAR(500) DEFAULT NULL COMMENT 'å¥åº·æ£€æŸ¥URL',
    health_check_interval INT DEFAULT 60 COMMENT 'å¥åº·æ£€æŸ¥é—´éš”(ç§’)',
    
    -- æ€§èƒ½ç»Ÿè®¡ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    total_requests BIGINT DEFAULT 0 COMMENT 'æ€»è¯·æ±‚æ•°',
    successful_requests BIGINT DEFAULT 0 COMMENT 'æˆåŠŸè¯·æ±‚æ•°',
    failed_requests BIGINT DEFAULT 0 COMMENT 'å¤±è´¥è¯·æ±‚æ•°',
    avg_response_time DECIMAL(8,3) DEFAULT 0 COMMENT 'å¹³å‡å“åº”æ—¶é—´',
    last_health_check_at TIMESTAMP NULL COMMENT 'æœ€åå¥åº·æ£€æŸ¥æ—¶é—´',
    last_error_at TIMESTAMP NULL COMMENT 'æœ€åé”™è¯¯æ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    INDEX idx_tenant_type (tenant_id, platform_type),
    INDEX idx_status (status),
    INDEX idx_priority (priority),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='AIå¹³å°ç®¡ç†è¡¨';
```

### 3.2 æ™ºèƒ½ä½“ç®¡ç†å±‚

```sql
-- 2. æ™ºèƒ½ä½“è¡¨ (å®Œæ•´ä¿ç•™)
CREATE TABLE ai_agents (
    id VARCHAR(36) PRIMARY KEY COMMENT 'æ™ºèƒ½ä½“ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    
    agent_name VARCHAR(100) NOT NULL COMMENT 'æ™ºèƒ½ä½“åç§°',
    description TEXT COMMENT 'æ™ºèƒ½ä½“æè¿°',
    category VARCHAR(50) DEFAULT NULL COMMENT 'åˆ†ç±»',
    agent_type ENUM('chatbot', 'workflow', 'plugin') DEFAULT 'chatbot' COMMENT 'ç±»å‹',
    avatar_url VARCHAR(500) DEFAULT NULL COMMENT 'å¤´åƒURL',
    
    -- æ™ºèƒ½ä½“é…ç½® (å®Œæ•´ä¿ç•™å¤æ‚åº¦) 
    config JSON NOT NULL COMMENT 'æ™ºèƒ½ä½“åŸºç¡€é…ç½®',
    model_config JSON COMMENT 'æ¨¡å‹é…ç½®',
    prompt_config JSON COMMENT 'æç¤ºè¯é…ç½®', 
    workflow_config JSON COMMENT 'å·¥ä½œæµé…ç½®',
    resource_config JSON COMMENT 'èµ„æºé…ç½®',
    security_config JSON COMMENT 'å®‰å…¨é…ç½®',
    
    -- çŠ¶æ€ç®¡ç†
    status ENUM('draft', 'testing', 'active', 'inactive', 'archived') DEFAULT 'draft' COMMENT 'çŠ¶æ€',
    version VARCHAR(20) DEFAULT '1.0.0' COMMENT 'å½“å‰ç‰ˆæœ¬å·',
    
    -- ä½¿ç”¨ç»Ÿè®¡ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    conversation_count BIGINT DEFAULT 0 COMMENT 'å¯¹è¯æ€»æ•°',
    message_count BIGINT DEFAULT 0 COMMENT 'æ¶ˆæ¯æ€»æ•°',
    total_tokens BIGINT DEFAULT 0 COMMENT 'æ€»Tokenæ¶ˆè€—',
    total_cost DECIMAL(10,4) DEFAULT 0 COMMENT 'æ€»è´¹ç”¨',
    avg_response_time DECIMAL(8,3) DEFAULT 0 COMMENT 'å¹³å‡å“åº”æ—¶é—´',
    success_rate DECIMAL(5,2) DEFAULT 0 COMMENT 'æˆåŠŸç‡',
    satisfaction_score DECIMAL(3,2) DEFAULT 0 COMMENT 'å¹³å‡æ»¡æ„åº¦',
    last_used_at TIMESTAMP NULL COMMENT 'æœ€åä½¿ç”¨æ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ›å»ºè€…ID',
    
    INDEX idx_tenant_status (tenant_id, status),
    INDEX idx_category (category),
    INDEX idx_agent_type (agent_type),
    INDEX idx_created_by (created_by),
    INDEX idx_last_used (last_used_at),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES saas_users(id) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='AIæ™ºèƒ½ä½“è¡¨';

-- 3. æ™ºèƒ½ä½“ç‰ˆæœ¬è¡¨ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ªæ ¸å¿ƒ)
CREATE TABLE ai_agent_versions (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ç‰ˆæœ¬ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    agent_id VARCHAR(36) NOT NULL COMMENT 'æ™ºèƒ½ä½“ID',
    
    version VARCHAR(20) NOT NULL COMMENT 'ç‰ˆæœ¬å·',
    version_name VARCHAR(100) COMMENT 'ç‰ˆæœ¬åç§°',
    changelog TEXT COMMENT 'å˜æ›´æ—¥å¿—',
    is_current BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å½“å‰ç‰ˆæœ¬',
    
    -- ç‰ˆæœ¬é…ç½® (å®Œæ•´ä¿ç•™å¤æ‚åº¦)
    config JSON NOT NULL COMMENT 'ç‰ˆæœ¬å®Œæ•´é…ç½®',
    model_config JSON COMMENT 'æ¨¡å‹é…ç½®',
    prompt_config JSON COMMENT 'æç¤ºè¯é…ç½®',
    workflow_config JSON COMMENT 'å·¥ä½œæµé…ç½®',
    diff_from_previous JSON COMMENT 'ä¸ä¸Šä¸€ç‰ˆæœ¬çš„å·®å¼‚',
    
    -- ç‰ˆæœ¬çŠ¶æ€
    status ENUM('draft', 'testing', 'stable', 'deprecated', 'archived') DEFAULT 'draft' COMMENT 'ç‰ˆæœ¬çŠ¶æ€',
    test_results JSON COMMENT 'æµ‹è¯•ç»“æœ',
    
    -- éƒ¨ç½²ç»Ÿè®¡ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    deploy_count INT DEFAULT 0 COMMENT 'éƒ¨ç½²æ¬¡æ•°',
    rollback_count INT DEFAULT 0 COMMENT 'å›æ»šæ¬¡æ•°',
    conversation_count BIGINT DEFAULT 0 COMMENT 'å¯¹è¯æ¬¡æ•°',
    success_rate DECIMAL(5,2) COMMENT 'æˆåŠŸç‡',
    avg_response_time DECIMAL(8,3) COMMENT 'å¹³å‡å“åº”æ—¶é—´',
    total_tokens BIGINT DEFAULT 0 COMMENT 'Tokenæ¶ˆè€—',
    total_cost DECIMAL(10,4) DEFAULT 0 COMMENT 'è´¹ç”¨æ¶ˆè€—',
    first_deployed_at TIMESTAMP NULL COMMENT 'é¦–æ¬¡éƒ¨ç½²æ—¶é—´',
    last_deployed_at TIMESTAMP NULL COMMENT 'æœ€åéƒ¨ç½²æ—¶é—´',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    created_by VARCHAR(36) NOT NULL COMMENT 'åˆ›å»ºè€…ID',
    
    UNIQUE KEY uk_agent_version (agent_id, version),
    INDEX idx_tenant_agent (tenant_id, agent_id),
    INDEX idx_is_current (is_current),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (agent_id) REFERENCES ai_agents(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES saas_users(id) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ™ºèƒ½ä½“ç‰ˆæœ¬è¡¨';
```

### 3.3 è°ƒåº¦ç®¡ç†å±‚ (æ ¸å¿ƒ)

```sql
-- 4. å¹³å°æ™ºèƒ½ä½“æ˜ å°„è¡¨ (è°ƒåº¦æ ¸å¿ƒ)
CREATE TABLE ai_platform_agents (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    agent_id VARCHAR(36) NOT NULL COMMENT 'æ™ºèƒ½ä½“ID',
    platform_id VARCHAR(36) NOT NULL COMMENT 'å¹³å°ID',
    
    platform_agent_id VARCHAR(100) NOT NULL COMMENT 'å¹³å°æ™ºèƒ½ä½“ID',
    platform_config JSON DEFAULT NULL COMMENT 'å¹³å°ç‰¹å®šé…ç½®',
    
    -- åŒæ­¥çŠ¶æ€ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    sync_status ENUM('pending', 'syncing', 'success', 'failed', 'outdated') DEFAULT 'pending' COMMENT 'åŒæ­¥çŠ¶æ€',
    last_sync_at TIMESTAMP NULL COMMENT 'æœ€ååŒæ­¥æ—¶é—´',
    sync_error TEXT DEFAULT NULL COMMENT 'åŒæ­¥é”™è¯¯ä¿¡æ¯',
    sync_attempt_count INT DEFAULT 0 COMMENT 'åŒæ­¥å°è¯•æ¬¡æ•°',
    sync_duration_ms INT COMMENT 'åŒæ­¥è€—æ—¶(æ¯«ç§’)',
    
    -- éƒ¨ç½²çŠ¶æ€
    deployment_status ENUM('deployed', 'deploying', 'failed', 'stopped', 'updating') DEFAULT 'stopped' COMMENT 'éƒ¨ç½²çŠ¶æ€',
    is_enabled BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦å¯ç”¨',
    deployment_config JSON COMMENT 'éƒ¨ç½²é…ç½®',
    
    -- æ€§èƒ½ç»Ÿè®¡ (è°ƒåº¦å†³ç­–ä¾æ®)
    total_requests BIGINT DEFAULT 0 COMMENT 'æ€»è¯·æ±‚æ•°',
    successful_requests BIGINT DEFAULT 0 COMMENT 'æˆåŠŸè¯·æ±‚æ•°',
    failed_requests BIGINT DEFAULT 0 COMMENT 'å¤±è´¥è¯·æ±‚æ•°',
    avg_response_time DECIMAL(8,3) DEFAULT 0 COMMENT 'å¹³å‡å“åº”æ—¶é—´',
    last_request_at TIMESTAMP NULL COMMENT 'æœ€åè¯·æ±‚æ—¶é—´',
    current_load INT DEFAULT 0 COMMENT 'å½“å‰è´Ÿè½½',
    max_concurrent_requests INT DEFAULT 100 COMMENT 'æœ€å¤§å¹¶å‘è¯·æ±‚æ•°',
    
    -- è´¨é‡è¯„ä¼° (è°ƒåº¦å†³ç­–ä¾æ®)
    quality_score DECIMAL(3,2) DEFAULT 0 COMMENT 'è´¨é‡è¯„åˆ†',
    stability_score DECIMAL(3,2) DEFAULT 0 COMMENT 'ç¨³å®šæ€§è¯„åˆ†',
    cost_efficiency DECIMAL(8,4) DEFAULT 0 COMMENT 'æˆæœ¬æ•ˆç‡',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    UNIQUE KEY uk_agent_platform (agent_id, platform_id),
    INDEX idx_tenant_agent (tenant_id, agent_id),
    INDEX idx_platform_id (platform_id),
    INDEX idx_sync_status (sync_status),
    INDEX idx_deployment_status (deployment_status),
    INDEX idx_performance (avg_response_time, success_rate),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (agent_id) REFERENCES ai_agents(id) ON DELETE CASCADE,
    FOREIGN KEY (platform_id) REFERENCES ai_platforms(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å¹³å°æ™ºèƒ½ä½“æ˜ å°„è¡¨';

-- 5. è°ƒåº¦ç­–ç•¥è¡¨ (æ™ºèƒ½ä½“è°ƒåº¦æ ¸å¿ƒ)
CREATE TABLE ai_scheduling_strategies (
    id VARCHAR(36) PRIMARY KEY COMMENT 'ç­–ç•¥ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    agent_id VARCHAR(36) NOT NULL COMMENT 'æ™ºèƒ½ä½“ID',
    
    strategy_name VARCHAR(100) NOT NULL COMMENT 'ç­–ç•¥åç§°',
    strategy_type ENUM('round_robin', 'least_connections', 'response_time', 'cost_optimized', 'weighted', 'custom') DEFAULT 'response_time' COMMENT 'è°ƒåº¦ç­–ç•¥ç±»å‹',
    description TEXT COMMENT 'ç­–ç•¥æè¿°',
    
    -- è°ƒåº¦é…ç½® (å®Œæ•´ä¿ç•™å¤æ‚åº¦)
    platform_weights JSON DEFAULT NULL COMMENT 'å¹³å°æƒé‡é…ç½®',
    platform_priorities JSON DEFAULT NULL COMMENT 'å¹³å°ä¼˜å…ˆçº§é…ç½®',
    load_balance_config JSON DEFAULT NULL COMMENT 'è´Ÿè½½å‡è¡¡é…ç½®',
    failover_config JSON DEFAULT NULL COMMENT 'æ•…éšœè½¬ç§»é…ç½®',
    health_check_config JSON DEFAULT NULL COMMENT 'å¥åº·æ£€æŸ¥é…ç½®',
    routing_rules JSON DEFAULT NULL COMMENT 'è·¯ç”±è§„åˆ™é…ç½®',
    cost_optimization_config JSON COMMENT 'æˆæœ¬ä¼˜åŒ–é…ç½®',
    
    -- è°ƒåº¦é™åˆ¶
    max_concurrent_requests INT DEFAULT 100 COMMENT 'æœ€å¤§å¹¶å‘è¯·æ±‚æ•°',
    timeout_seconds INT DEFAULT 30 COMMENT 'è¶…æ—¶æ—¶é—´(ç§’)',
    retry_count INT DEFAULT 3 COMMENT 'é‡è¯•æ¬¡æ•°',
    retry_interval_ms INT DEFAULT 1000 COMMENT 'é‡è¯•é—´éš”(æ¯«ç§’)',
    circuit_breaker_config JSON COMMENT 'ç†”æ–­å™¨é…ç½®',
    
    -- è°ƒåº¦ç»Ÿè®¡ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    total_dispatches BIGINT DEFAULT 0 COMMENT 'æ€»è°ƒåº¦æ¬¡æ•°',
    successful_dispatches BIGINT DEFAULT 0 COMMENT 'æˆåŠŸè°ƒåº¦æ¬¡æ•°',
    failed_dispatches BIGINT DEFAULT 0 COMMENT 'å¤±è´¥è°ƒåº¦æ¬¡æ•°',
    avg_dispatch_time DECIMAL(8,3) DEFAULT 0 COMMENT 'å¹³å‡è°ƒåº¦æ—¶é—´(æ¯«ç§’)',
    last_dispatch_at TIMESTAMP NULL COMMENT 'æœ€åè°ƒåº¦æ—¶é—´',
    
    -- å¹³å°ä½¿ç”¨ç»Ÿè®¡ (è°ƒåº¦æ•ˆæœåˆ†æ)
    platform_usage_stats JSON COMMENT 'å„å¹³å°ä½¿ç”¨ç»Ÿè®¡',
    performance_metrics JSON COMMENT 'æ€§èƒ½æŒ‡æ ‡å†å²',
    cost_metrics JSON COMMENT 'æˆæœ¬æŒ‡æ ‡å†å²',
    
    -- çŠ¶æ€ç®¡ç†
    is_enabled BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦å¯ç”¨',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    UNIQUE KEY uk_agent_strategy (agent_id),
    INDEX idx_tenant_agent (tenant_id, agent_id),
    INDEX idx_strategy_type (strategy_type),
    INDEX idx_is_enabled (is_enabled),
    INDEX idx_performance (avg_dispatch_time, successful_dispatches),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (agent_id) REFERENCES ai_agents(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è°ƒåº¦ç­–ç•¥è¡¨';

-- 6. è°ƒåº¦å†å²è¡¨ (è°ƒåº¦è·Ÿè¸ªæ ¸å¿ƒ)
CREATE TABLE ai_dispatch_logs (
    id VARCHAR(36) PRIMARY KEY COMMENT 'è°ƒåº¦æ—¥å¿—ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    
    request_id VARCHAR(64) NOT NULL COMMENT 'è¯·æ±‚ID',
    agent_id VARCHAR(36) NOT NULL COMMENT 'æ™ºèƒ½ä½“ID',
    strategy_id VARCHAR(36) COMMENT 'ä½¿ç”¨çš„ç­–ç•¥ID',
    
    -- è°ƒåº¦å†³ç­–è¿‡ç¨‹ (å®Œæ•´è·Ÿè¸ª)
    available_platforms JSON NOT NULL COMMENT 'å¯ç”¨å¹³å°åˆ—è¡¨',
    platform_scores JSON COMMENT 'å¹³å°è¯„åˆ†',
    selected_platform_id VARCHAR(36) COMMENT 'é€‰ä¸­çš„å¹³å°ID',
    selection_reason VARCHAR(500) COMMENT 'é€‰æ‹©åŸå› ',
    fallback_platforms JSON COMMENT 'å¤‡ç”¨å¹³å°åˆ—è¡¨',
    
    -- è°ƒåº¦æ€§èƒ½
    dispatch_time_ms DECIMAL(8,3) NOT NULL COMMENT 'è°ƒåº¦è€—æ—¶(æ¯«ç§’)',
    total_time_ms DECIMAL(8,3) COMMENT 'æ€»è€—æ—¶(æ¯«ç§’)',
    queue_wait_time_ms DECIMAL(8,3) COMMENT 'é˜Ÿåˆ—ç­‰å¾…æ—¶é—´',
    
    -- è°ƒåº¦ç»“æœ
    dispatch_status ENUM('success', 'failed', 'timeout', 'no_available_platform') NOT NULL COMMENT 'è°ƒåº¦çŠ¶æ€',
    response_status_code INT COMMENT 'å“åº”çŠ¶æ€ç ',
    error_code VARCHAR(50) COMMENT 'é”™è¯¯ç ',
    error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    
    -- é‡è¯•ä¿¡æ¯
    retry_count INT DEFAULT 0 COMMENT 'é‡è¯•æ¬¡æ•°',
    retry_platforms JSON COMMENT 'é‡è¯•å¹³å°åˆ—è¡¨',
    final_platform_id VARCHAR(36) COMMENT 'æœ€ç»ˆæˆåŠŸçš„å¹³å°ID',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    
    INDEX idx_tenant_agent (tenant_id, agent_id),
    INDEX idx_request_id (request_id),
    INDEX idx_selected_platform (selected_platform_id),
    INDEX idx_dispatch_status (dispatch_status),
    INDEX idx_created_at (created_at),
    INDEX idx_dispatch_time (dispatch_time_ms),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (agent_id) REFERENCES ai_agents(id) ON DELETE CASCADE,
    FOREIGN KEY (strategy_id) REFERENCES ai_scheduling_strategies(id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è°ƒåº¦å†å²è¡¨';
```

---

## ğŸ”§ ä¼å¾®å¹³å°å®Œæ•´è®¾è®¡ (12+å¼ è¡¨)

### 4.1 è´¦å·ç®¡ç†å±‚

```sql
-- 1. ä¼å¾®è´¦å·è¡¨ (å®Œæ•´ä¿ç•™9ç§çŠ¶æ€)
CREATE TABLE wework_accounts (
    id VARCHAR(36) PRIMARY KEY COMMENT 'è´¦å·ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    
    account_name VARCHAR(100) NOT NULL COMMENT 'è´¦å·åç§°',
    wework_guid VARCHAR(100) UNIQUE COMMENT 'ä¼å¾®å®ä¾‹GUID',
    proxy_id VARCHAR(100) COMMENT 'ä»£ç†ID',
    phone VARCHAR(20) COMMENT 'ç»‘å®šæ‰‹æœºå·',
    callback_url VARCHAR(500) COMMENT 'å›è°ƒåœ°å€',
    
    -- çŠ¶æ€ç›¸å…³å­—æ®µ (å®Œæ•´ä¿ç•™9ç§çŠ¶æ€)
    status ENUM(
        'CREATED', 'INITIALIZING', 'WAITING_QR', 'WAITING_CONFIRM',
        'VERIFYING', 'ONLINE', 'OFFLINE', 'ERROR', 'RECOVERING'
    ) NOT NULL DEFAULT 'CREATED' COMMENT 'è´¦å·çŠ¶æ€',
    health_score INT DEFAULT 100 COMMENT 'å¥åº·åº¦è¯„åˆ† (0-100)',
    last_login_time TIMESTAMP NULL COMMENT 'æœ€åç™»å½•æ—¶é—´',
    last_heartbeat_time TIMESTAMP NULL COMMENT 'æœ€åå¿ƒè·³æ—¶é—´',
    
    -- é…ç½®ç›¸å…³å­—æ®µ (ç”Ÿå‘½å‘¨æœŸç®¡ç†å¿…éœ€)
    auto_reconnect BOOLEAN DEFAULT TRUE COMMENT 'æ˜¯å¦è‡ªåŠ¨é‡è¿',
    monitor_interval INT DEFAULT 30 COMMENT 'ç›‘æ§é—´éš”(ç§’)',
    max_retry_count INT DEFAULT 3 COMMENT 'æœ€å¤§é‡è¯•æ¬¡æ•°',
    retry_count INT DEFAULT 0 COMMENT 'å½“å‰é‡è¯•æ¬¡æ•°',
    config_json JSON COMMENT 'è´¦å·é…ç½®(JSONæ ¼å¼)',
    tenant_tag VARCHAR(50) COMMENT 'ç§Ÿæˆ·æ ‡ç­¾(ç”¨äºåˆ†ç»„ç®¡ç†)',
    
    -- ç»Ÿè®¡ä¿¡æ¯ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ª)
    total_messages BIGINT DEFAULT 0 COMMENT 'æ€»æ¶ˆæ¯æ•°',
    successful_messages BIGINT DEFAULT 0 COMMENT 'æˆåŠŸæ¶ˆæ¯æ•°',
    failed_messages BIGINT DEFAULT 0 COMMENT 'å¤±è´¥æ¶ˆæ¯æ•°',
    online_duration_hours DECIMAL(10,2) DEFAULT 0 COMMENT 'åœ¨çº¿æ—¶é•¿(å°æ—¶)',
    offline_count INT DEFAULT 0 COMMENT 'ç¦»çº¿æ¬¡æ•°',
    error_count INT DEFAULT 0 COMMENT 'é”™è¯¯æ¬¡æ•°',
    recovery_count INT DEFAULT 0 COMMENT 'æ¢å¤æ¬¡æ•°',
    last_error_at TIMESTAMP NULL COMMENT 'æœ€åé”™è¯¯æ—¶é—´',
    last_recovery_at TIMESTAMP NULL COMMENT 'æœ€åæ¢å¤æ—¶é—´',
    
    -- æ€§èƒ½æŒ‡æ ‡
    avg_message_response_time DECIMAL(8,3) DEFAULT 0 COMMENT 'å¹³å‡æ¶ˆæ¯å“åº”æ—¶é—´',
    message_success_rate DECIMAL(5,2) DEFAULT 0 COMMENT 'æ¶ˆæ¯æˆåŠŸç‡',
    uptime_percentage DECIMAL(5,2) DEFAULT 0 COMMENT 'åœ¨çº¿ç‡',
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    
    INDEX idx_tenant_status (tenant_id, status),
    INDEX idx_tenant_name (tenant_id, account_name),
    INDEX idx_status_heartbeat (status, last_heartbeat_time),
    INDEX idx_health_score (health_score),
    INDEX idx_tenant_tag (tenant_id, tenant_tag),
    INDEX idx_wework_guid (wework_guid),
    INDEX idx_retry_count (retry_count),
    INDEX idx_performance (message_success_rate, uptime_percentage),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ä¼å¾®è´¦å·è¡¨';

-- 2. è´¦å·çŠ¶æ€å†å²è¡¨ (ç”Ÿå‘½å‘¨æœŸé—­ç¯è·Ÿè¸ªæ ¸å¿ƒ)
CREATE TABLE wework_account_status_history (
    id VARCHAR(36) PRIMARY KEY COMMENT 'å†å²ID',
    tenant_id VARCHAR(36) NOT NULL COMMENT 'ç§Ÿæˆ·ID',
    account_id VARCHAR(36) NOT NULL COMMENT 'è´¦å·ID',
    
    -- çŠ¶æ€å˜æ›´ä¿¡æ¯ (ç”Ÿå‘½å‘¨æœŸè·Ÿè¸ªæ ¸å¿ƒ)
    old_status ENUM(
        'CREATED', 'INITIALIZING', 'WAITING_QR', 'WAITING_CONFIRM',
        'VERIFYING', 'ONLINE', 'OFFLINE', 'ERROR', 'RECOVERING'
    ) COMMENT 'æ—§çŠ¶æ€',
    new_status ENUM(
        'CREATED', 'INITIALIZING', 'WAITING_QR', 'WAITING_CONFIRM',
        'VERIFYING', 'ONLINE', 'OFFLINE', 'ERROR', 'RECOVERING'
    ) NOT NULL COMMENT 'æ–°çŠ¶æ€',
    change_reason VARCHAR(500) COMMENT 'å˜æ›´åŸå› ',
    trigger_type ENUM('MANUAL', 'AUTO', 'CALLBACK', 'MONITOR', 'SCHEDULED', 'SYSTEM', 'HEARTBEAT_TIMEOUT', 'ERROR_RECOVERY') 
        NOT NULL DEFAULT 'AUTO' COMMENT 'è§¦å‘ç±»å‹',
    extra_data JSON COMMENT 'é¢å¤–æ•°æ®(åŒ…å«é”™è¯¯ä¿¡æ¯ã€æ¢å¤æ“ä½œç­‰)',
    
    -- çŠ¶æ€æŒç»­æ—¶é—´åˆ†æ (ç”Ÿå‘½å‘¨æœŸåˆ†æ)
    duration_seconds INT COMMENT 'åœ¨ä¸Šä¸€çŠ¶æ€çš„æŒç»­æ—¶é—´(ç§’)',
    expected_duration_seconds INT COMMENT 'é¢„æœŸæŒç»­æ—¶é—´',
    is_abnormal_duration BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¼‚å¸¸æŒç»­æ—¶é—´',
    
    -- ç¯å¢ƒä¿¡æ¯
    server_node VARCHAR(50) COMMENT 'æœåŠ¡èŠ‚ç‚¹',
    client_version VARCHAR(20) COMMENT 'å®¢æˆ·ç«¯ç‰ˆæœ¬',
    network_quality VARCHAR(20) COMMENT 'ç½‘ç»œè´¨é‡',
    
    -- æ“ä½œå®¡è®¡ä¿¡æ¯  
    operator_id VARCHAR(36) COMMENT 'æ“ä½œç”¨æˆ·ID',
    operator_name VARCHAR(100) COMMENT 'æ“ä½œç”¨æˆ·å',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    user_agent VARCHAR(500) COMMENT 'ç”¨æˆ·ä»£ç†',
    
    -- ä¸šåŠ¡å½±å“åˆ†æ
    affected_conversations INT DEFAULT 0 COMMENT 'å½±å“çš„ä¼šè¯æ•°',
    lost_messages INT DEFAULT 0 COMMENT 'ä¸¢å¤±çš„æ¶ˆæ¯æ•°',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    
    INDEX idx_tenant_account (tenant_id, account_id),
    INDEX idx_account_time (account_id, created_at),
    INDEX idx_status_change (old_status, new_status),
    INDEX idx_trigger_type (trigger_type),
    INDEX idx_operator (operator_id),
    INDEX idx_abnormal_duration (is_abnormal_duration),
    INDEX idx_duration (duration_seconds),
    
    FOREIGN KEY (tenant_id) REFERENCES saas_tenants(id) ON DELETE CASCADE,
    FOREIGN KEY (account_id) REFERENCES wework_accounts(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ä¼å¾®è´¦å·çŠ¶æ€å†å²è¡¨';
```

---

## ğŸ¯ æ€»ç»“

### âœ… **é‡æ–°è®¾è®¡çš„æ ¸å¿ƒä»·å€¼**

1. **ç”Ÿå‘½å‘¨æœŸé—­ç¯è·Ÿè¸ª** 
   - âœ… ä¼å¾®è´¦å·9ç§çŠ¶æ€å®Œæ•´è·Ÿè¸ª
   - âœ… æ™ºèƒ½ä½“ç‰ˆæœ¬ã€éƒ¨ç½²ã€è°ƒåº¦å…¨é“¾è·¯è·Ÿè¸ª  
   - âœ… æ¶ˆæ¯ä»åˆ›å»ºåˆ°é€è¾¾çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
   - âœ… å¹³å°æ€§èƒ½ã€ç¨³å®šæ€§æŒç»­ç›‘æ§

2. **æ™ºèƒ½ä½“é…ç½®å’Œè°ƒåº¦**
   - âœ… å¤šå¹³å°ç»Ÿä¸€ç®¡ç† (difyã€cozeã€fastgptã€custom)
   - âœ… çµæ´»è°ƒåº¦ç­–ç•¥ (è½®è¯¢ã€æœ€å°‘è¿æ¥ã€å“åº”æ—¶é—´ã€æˆæœ¬ä¼˜åŒ–)
   - âœ… å®Œæ•´é…ç½®ç®¡ç† (æ¨¡å‹ã€æç¤ºè¯ã€å·¥ä½œæµã€èµ„æº)  
   - âœ… ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒæ§åˆ¶
   - âœ… å®æ—¶æ€§èƒ½ç›‘æ§å’Œè´¨é‡è¯„ä¼°

3. **ä¼ä¸šçº§ç›‘æ§è¿ç»´**
   - âœ… è¯¦ç»†çš„ç›‘æ§è§„åˆ™é…ç½®
   - âœ… å¤šç»´åº¦å‘Šè­¦ç®¡ç† (15ç§å‘Šè­¦ç±»å‹)
   - âœ… è‡ªåŠ¨æ¢å¤å’Œæ•…éšœè½¬ç§»
   - âœ… å®Œæ•´çš„å®¡è®¡æ—¥å¿—

### ğŸš€ **æ¶æ„ä¼˜åŠ¿ä¿æŒ**
- **ç»Ÿä¸€å±‚ä¼˜åŒ–** - èº«ä»½ã€å®‰å…¨ã€é…ç½®ã€å‘Šè­¦ç»Ÿä¸€ç®¡ç†  
- **ä¸šåŠ¡å±‚å®Œæ•´** - æ‰€æœ‰åŸæœ‰ä¸šåŠ¡å¤æ‚åº¦100%ä¿ç•™
- **æ€§èƒ½ä¼˜åŒ–** - åˆ†åŒºè¡¨ã€ç´¢å¼•ã€ç¼“å­˜ç­–ç•¥
- **æ‰©å±•æ€§å¼º** - JSONé…ç½®æ”¯æŒçµæ´»æ‰©å±•

è¿™ä¸ªé‡æ–°è®¾è®¡çœŸæ­£åšåˆ°äº†**æ—¢ä¼˜åŒ–æ¶æ„åˆä¿ç•™å¤æ‚åº¦**ï¼Œå®Œå…¨æ»¡è¶³ä¼ä¸šçº§ç”Ÿå‘½å‘¨æœŸé—­ç¯è·Ÿè¸ªå’Œæ™ºèƒ½ä½“é…ç½®è°ƒåº¦çš„éœ€æ±‚ï¼

---

## ğŸ“ å®Œæ•´æ•°æ®åº“è„šæœ¬

ä¸ºäº†ä¾¿äºå®é™…éƒ¨ç½²å’Œç®¡ç†ï¼Œæ‰€æœ‰æ•°æ®åº“è®¾è®¡å·²æŒ‰æ¨¡å—æ‹†åˆ†æˆç‹¬ç«‹çš„SQLè„šæœ¬æ–‡ä»¶ï¼š

### ğŸ—‚ï¸ æ•°æ®åº“è„šæœ¬ç›®å½•

```
docs/02-ç³»ç»Ÿè®¾è®¡/database-scripts/
â”œâ”€â”€ 01-saas-unified-core.sql      # ç»Ÿä¸€æ ¸å¿ƒå±‚ (24å¼ è¡¨)
â”œâ”€â”€ 02-ai-agent-platform.sql     # AIæ™ºèƒ½ä½“å¹³å° (20å¼ è¡¨) 
â”œâ”€â”€ 03-wework-platform.sql       # ä¼å¾®å¹³å° (15å¼ è¡¨)
â”œâ”€â”€ 04-health-management.sql     # å¥åº·ç®¡ç†æ¨¡å— (12å¼ è¡¨)
â””â”€â”€ README.md                     # è„šæœ¬ä½¿ç”¨è¯´æ˜
```

### ğŸ“Š è„šæœ¬ç‰¹æ€§æ¦‚è§ˆ

| è„šæœ¬æ–‡ä»¶ | æ•°æ®åº“å | è¡¨æ•°é‡ | æ ¸å¿ƒåŠŸèƒ½ | é¢„ä¼°æ•°æ®é‡ |
|---------|----------|-------|----------|-----------|
| **01-saas-unified-core.sql** | `saas_unified_core` | 24å¼  | èº«ä»½ç®¡ç†ã€å®‰å…¨å®¡è®¡ã€é…é¢è®¡è´¹ã€ç³»ç»Ÿç®¡ç† | 10,000,000+ |
| **02-ai-agent-platform.sql** | `ai_agent_platform` | 20å¼  | æ™ºèƒ½ä½“ç®¡ç†ã€è°ƒåº¦ç­–ç•¥ã€çŸ¥è¯†åº“ã€å·¥å…· | 50,000,000+ |
| **03-wework-platform.sql** | `wework_platform` | 15å¼  | ä¼å¾®è´¦å·ã€æ¶ˆæ¯ç®¡ç†ã€è”ç³»äººã€ç¾¤èŠ | 100,000,000+ |
| **04-health-management.sql** | `health_management` | 12å¼  | æ‚£è€…ç®¡ç†ã€å¥åº·è®°å½•ã€è®¾å¤‡ç®¡ç†ã€å‘Šè­¦ | 20,000,000+ |

### ğŸš€ éƒ¨ç½²ä½¿ç”¨

#### å¿«é€Ÿéƒ¨ç½²
```bash
# 1. æŒ‰é¡ºåºæ‰§è¡Œè„šæœ¬
mysql -u root -p < database-scripts/01-saas-unified-core.sql
mysql -u root -p < database-scripts/02-ai-agent-platform.sql
mysql -u root -p < database-scripts/03-wework-platform.sql
mysql -u root -p < database-scripts/04-health-management.sql

# 2. éªŒè¯éƒ¨ç½²
mysql -u root -p -e "SHOW DATABASES LIKE '%saas%' OR '%ai%' OR '%wework%' OR '%health%';"
```

#### åˆ†æ¨¡å—éƒ¨ç½²
å¯æ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©æ€§éƒ¨ç½²ï¼š
- **æ ¸å¿ƒå¿…é¡»**ï¼š`01-saas-unified-core.sql` 
- **AIåŠŸèƒ½**ï¼š`02-ai-agent-platform.sql`
- **ä¼å¾®åŠŸèƒ½**ï¼š`03-wework-platform.sql`
- **å¥åº·åŠŸèƒ½**ï¼š`04-health-management.sql`

### ğŸ”§ æ•°æ®åº“è®¾è®¡äº®ç‚¹

#### 1. **ç»Ÿä¸€æ ¸å¿ƒå±‚** (`01-saas-unified-core.sql`)
- âœ… **å¤šç§Ÿæˆ·æƒé™æ¨¡å‹**ï¼šæ”¯æŒç§Ÿæˆ·éš”ç¦»å’Œç»†ç²’åº¦æƒé™æ§åˆ¶
- âœ… **é…é¢ç®¡ç†ç³»ç»Ÿ**ï¼šå¤šç»´åº¦èµ„æºé…é¢å’Œå®æ—¶ä½¿ç”¨ç»Ÿè®¡
- âœ… **ç»Ÿä¸€å®¡è®¡æ—¥å¿—**ï¼šè·¨æ¨¡å—æ“ä½œå®¡è®¡ (åˆ†åŒºè¡¨è®¾è®¡)
- âœ… **ç³»ç»Ÿç›‘æ§å‘Šè­¦**ï¼šç»Ÿä¸€çš„ç›‘æ§è§„åˆ™å’Œå‘Šè­¦ç®¡ç†
- âœ… **æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ**ï¼šæ¨¡æ¿åŒ–æ¶ˆæ¯å’Œå¤šæ¸ é“é€šçŸ¥

#### 2. **AIæ™ºèƒ½ä½“å¹³å°** (`02-ai-agent-platform.sql`)
- âœ… **å¤šå¹³å°æ”¯æŒ**ï¼šdifyã€cozeã€fastgptç­‰å¹³å°ç»Ÿä¸€ç®¡ç†
- âœ… **æ™ºèƒ½è°ƒåº¦ç³»ç»Ÿ**ï¼š6ç§è°ƒåº¦ç­–ç•¥ + è‡ªåŠ¨æ•…éšœè½¬ç§»
- âœ… **ç‰ˆæœ¬ç®¡ç†**ï¼šæ™ºèƒ½ä½“ç‰ˆæœ¬æ§åˆ¶å’Œéƒ¨ç½²ç®¡ç†
- âœ… **çŸ¥è¯†åº“é›†æˆ**ï¼šå¤šç±»å‹çŸ¥è¯†åº“å’Œå·¥å…·ç”Ÿæ€
- âœ… **æ€§èƒ½ç›‘æ§**ï¼šè°ƒç”¨æ—¥å¿—å’Œå¹³å°æŒ‡æ ‡ (åˆ†åŒºè¡¨è®¾è®¡)

#### 3. **ä¼å¾®å¹³å°** (`03-wework-platform.sql`)  
- âœ… **9çŠ¶æ€ç”Ÿå‘½å‘¨æœŸ**ï¼šCREATED â†’ INITIALIZING â†’ ... â†’ RECOVERING
- âœ… **å®æ—¶ç›‘æ§ç³»ç»Ÿ**ï¼šå¿ƒè·³æ£€æŸ¥ã€å¥åº·è¯„åˆ†ã€è‡ªåŠ¨æ¢å¤
- âœ… **æ¶ˆæ¯å…¨é“¾è·¯**ï¼šä»å‘é€åˆ°é€è¾¾çš„å®Œæ•´è·Ÿè¸ª
- âœ… **è”ç³»äººåŒæ­¥**ï¼šä¼å¾®è”ç³»äººå’Œç¾¤èŠå®æ—¶åŒæ­¥
- âœ… **15ç§å‘Šè­¦ç±»å‹**ï¼šè¦†ç›–è´¦å·ã€æ¶ˆæ¯ã€æ€§èƒ½ç­‰å…¨æ–¹ä½ç›‘æ§

#### 4. **å¥åº·ç®¡ç†æ¨¡å—** (`04-health-management.sql`)
- âœ… **æ‚£è€…å…¨ç”Ÿå‘½å‘¨æœŸ**ï¼šä»æ³¨å†Œåˆ°å¥åº·æ¡£æ¡ˆå®Œæ•´ç®¡ç†
- âœ… **å¤šè®¾å¤‡æ¥å…¥**ï¼šè¡€å‹è®¡ã€è¡€ç³–ä»ªã€æ™ºèƒ½æ‰‹è¡¨ç­‰è®¾å¤‡æ”¯æŒ
- âœ… **æ™ºèƒ½å¥åº·å‘Šè­¦**ï¼šåŸºäºé˜ˆå€¼ã€è¶‹åŠ¿ã€æ¨¡å¼çš„å‘Šè­¦è§„åˆ™
- âœ… **æ•°æ®è´¨é‡æ§åˆ¶**ï¼šè®¾å¤‡æ•°æ®éªŒè¯å’Œè´¨é‡è¯„ä¼°
- âœ… **å¥åº·é£é™©è¯„ä¼°**ï¼šå¤šç»´åº¦å¥åº·é£é™©åˆ†æå’Œå»ºè®®

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–è®¾è®¡

#### åˆ†åŒºè¡¨ç­–ç•¥
```sql
-- ç¤ºä¾‹ï¼šè°ƒç”¨æ—¥å¿—æŒ‰æœˆåˆ†åŒº
PARTITION BY RANGE (UNIX_TIMESTAMP(created_at)) (
    PARTITION p202501 VALUES LESS THAN (UNIX_TIMESTAMP('2025-02-01 00:00:00')),
    PARTITION p202502 VALUES LESS THAN (UNIX_TIMESTAMP('2025-03-01 00:00:00')),
    PARTITION p_future VALUES LESS THAN MAXVALUE
);
```

#### ç´¢å¼•ä¼˜åŒ–
- **è”åˆç´¢å¼•**ï¼šæ ¹æ®ä¸šåŠ¡æŸ¥è¯¢æ¨¡å¼è®¾è®¡
- **è¦†ç›–ç´¢å¼•**ï¼šå‡å°‘å›è¡¨æŸ¥è¯¢
- **JSONç´¢å¼•**ï¼šæ”¯æŒJSONå­—æ®µé«˜æ•ˆæŸ¥è¯¢

#### å­˜å‚¨è¿‡ç¨‹ä¼˜åŒ–
- **ä¸šåŠ¡é€»è¾‘å­˜å‚¨è¿‡ç¨‹åŒ–**ï¼šå‡å°‘åº”ç”¨å±‚å¤æ‚åº¦
- **ç»Ÿè®¡åˆ†æè‡ªåŠ¨åŒ–**ï¼šå®šæ—¶ä»»åŠ¡ç”ŸæˆæŠ¥è¡¨
- **æ•°æ®æ¸…ç†è‡ªåŠ¨åŒ–**ï¼šè¿‡æœŸæ•°æ®è‡ªåŠ¨æ¸…ç†

### ğŸ”— ç›¸å…³æ–‡æ¡£é“¾æ¥

- ğŸ“‹ **[æ•°æ®åº“è„šæœ¬è¯´æ˜](./database-scripts/README.md)** - å®Œæ•´çš„éƒ¨ç½²å’Œä½¿ç”¨æŒ‡å—
- ğŸ”„ **[ç”Ÿå‘½å‘¨æœŸé—­ç¯è®¾è®¡](./LIFECYCLE_CLOSED_LOOP_DESIGN.md)** - ä¸šåŠ¡é—­ç¯å®ç°é€»è¾‘
- ğŸ—ï¸ **[æŠ€æœ¯æ¶æ„åˆ†æ](./TECHNICAL_ARCHITECTURE_ANALYSIS.md)** - æ•´ä½“æŠ€æœ¯æ¶æ„
- ğŸ“ **[ç»Ÿä¸€æ•°æ®æ¨¡å‹è®¾è®¡](./ENTERPRISE_UNIFIED_DATA_MODEL.md)** - v2.0æ•°æ®æ¨¡å‹

### ğŸ’¡ è®¾è®¡åŸåˆ™æ€»ç»“

1. **æ¶æ„ç»Ÿä¸€ï¼Œä¸šåŠ¡ç‹¬ç«‹**
   - ç»Ÿä¸€çš„èº«ä»½ã€å®‰å…¨ã€é…é¢ã€å‘Šè­¦å±‚
   - ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å—æ•°æ®åº“ï¼Œé¿å…è€¦åˆ

2. **å¤æ‚åº¦ä¿ç•™ï¼Œæ€§èƒ½ä¼˜åŒ–**
   - ä¿ç•™åŸæœ‰ä¸šåŠ¡é€»è¾‘çš„å®Œæ•´å¤æ‚åº¦
   - é€šè¿‡åˆ†åŒºã€ç´¢å¼•ã€å­˜å‚¨è¿‡ç¨‹ä¼˜åŒ–æ€§èƒ½

3. **æ‰©å±•æ€§è®¾è®¡ï¼Œç»´æŠ¤å‹å¥½**
   - æ¨¡å—åŒ–æ•°æ®åº“è®¾è®¡ï¼Œä¾¿äºæ‰©å±•
   - å®Œæ•´çš„éƒ¨ç½²è„šæœ¬å’Œç»´æŠ¤å·¥å…·

4. **ç”Ÿäº§å°±ç»ªï¼Œä¼ä¸šçº§æ ‡å‡†**
   - åˆ†åŒºè¡¨æ”¯æŒå¤§æ•°æ®é‡
   - å®Œæ•´çš„ç›‘æ§ã€å‘Šè­¦ã€å®¡è®¡ä½“ç³»
   - è‡ªåŠ¨åŒ–è¿ç»´å’Œæ•°æ®æ¸…ç†

ğŸ¯ **è¿™å¥—æ•°æ®åº“è®¾è®¡çœŸæ­£å®ç°äº†ä¼ä¸šçº§ç”Ÿäº§ç¯å¢ƒçš„è¦æ±‚ï¼Œæ—¢ä¿ç•™äº†ä¸šåŠ¡å¤æ‚åº¦ï¼Œåˆç¡®ä¿äº†ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ï¼**