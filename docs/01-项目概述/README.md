# 🏢 企业级SaaS服务平台

> **WeWork Management Platform & AI Agent Platform**  
> 基于企业微信生态的智能化多业务SaaS服务平台

---

## 🎯 项目简介

**企业级SaaS服务平台**是一个基于企业微信深度集成的综合性SaaS平台，涵盖AI智能体管理、健康管理、服务类商品、客户管理等多个业务领域。平台采用现代化微服务架构，支持多租户、智能调度、实时监控等企业级特性，为企业提供完整的数字化转型解决方案。

### 🌟 平台特色

- **🏢 多租户SaaS架构** - 企业级多租户隔离，支持大规模部署
- **🤖 AI智能体平台** - 统一管理多AI平台，智能调度和故障转移
- **🚀 企微深度集成** - 完整的企微生态对接，9状态生命周期管理
- **💼 服务类商品支持** - 专为服务行业设计的预约、调度、结算体系
- **👥 客户360度管理** - 全生命周期客户管理和行为分析
- **📊 大数据支持** - 分区表设计，支持海量数据处理
- **🔒 企业级安全** - 多层安全防护，满足企业合规要求
- **📈 智能监控** - 全链路监控，实时告警和自动恢复

---

## 🏗️ 系统架构

### 微服务模块架构

```
┌─────────────────────────────────────────────────────────┐
│                    🌐 API网关层                          │
│            Spring Cloud Gateway + 负载均衡              │
└─────────────────────────────────────────────────────────┘
┌─────────────────┬─────────────────┬─────────────────────┐
│   👤 账户服务      │   💬 消息服务      │   📊 监控服务        │
│  Account Service │ Message Service │ Monitor Service     │
└─────────────────┼─────────────────┼─────────────────────┤
│   🛒 服务商品服务  │   👥 客户管理服务  │   🎯 营销活动服务     │
│  Service Product │ Customer Mgmt   │ Marketing Service   │
└─────────────────┼─────────────────┼─────────────────────┤
│   🤖 AI智能体服务  │   🏥 健康管理服务  │   🔔 回调服务        │
│  AI Agent Service│ Health Service  │ Callback Service    │
└─────────────────┴─────────────────┴─────────────────────┘
┌─────────────────────────────────────────────────────────┐
│                    📊 数据存储层                          │
│  MySQL集群 + Redis集群 + InfluxDB + MongoDB + MinIO    │
└─────────────────────────────────────────────────────────┘
```

### 分库分表架构

```
📊 数据库架构 (6个独立数据库，98张表)
├── 🏢 saas_unified_core        # 统一核心层 (24张表)
│   ├── 身份管理层 (租户、用户、权限)
│   ├── 安全审计层 (API密钥、会话、审计)
│   ├── 配额计费层 (配额、统计、计费)
│   └── 系统管理层 (配置、告警、监控)
├── 🤖 ai_agent_platform        # AI智能体平台 (20张表)
│   ├── 平台管理 (多AI平台统一)
│   ├── 智能体管理 (版本控制)
│   ├── 调度管理 (6种调度策略)
│   └── 监控分析 (性能指标)
├── 🚀 wework_platform          # 企微平台 (15张表)
│   ├── 账号管理 (9状态生命周期)
│   ├── 消息管理 (全类型消息)
│   ├── 联系人管理 (同步管理)
│   └── 会话管理 (状态跟踪)
├── 🛒 core_business_platform   # 服务类核心业务 (14张表)
│   ├── 服务管理 (分类、提供商)
│   ├── 订单管理 (预约、支付)
│   └── 营销管理 (活动、优惠券)
├── 👥 customer_management      # 客户管理 (13张表)
│   ├── 客户档案 (360度视图)
│   ├── 标签管理 (智能标签)
│   ├── 分群管理 (动态分群)
│   └── 行为分析 (路径分析)
└── 🏥 health_management        # 健康管理 (12张表)
    ├── 患者管理 (档案管理)
    ├── 健康记录 (数据收集)
    ├── 设备管理 (IoT接入)
    └── 健康告警 (智能预警)
```

---

## ✨ 核心功能

### 🏢 多租户SaaS核心

#### 🔐 统一身份管理
- **多租户隔离**: 完整的租户数据隔离和权限控制
- **细粒度权限**: 基于资源和操作的RBAC权限模型
- **安全会话**: 多设备登录控制和会话安全管理
- **API密钥管理**: 第三方集成的安全密钥管理

#### 📊 配额计费管理
- **多维度配额**: 账号数、消息数、API调用数、存储空间等
- **实时监控**: 配额使用情况实时监控和预警
- **弹性扩容**: 自动扩容和按需计费
- **使用统计**: 详细的使用统计和成本分析

### 🤖 AI智能体平台

#### 🔄 多平台统一管理
- **平台集成**: 支持dify、coze、fastgpt、自定义平台
- **统一接口**: 标准化API接口，屏蔽平台差异
- **配置管理**: 可视化配置界面，支持批量操作
- **版本控制**: 智能体版本管理和发布控制

#### 🎯 智能调度系统
```yaml
调度策略:
  - round_robin: 轮询调度
  - least_connections: 最少连接
  - response_time: 响应时间优先
  - cost_optimized: 成本优化
  - weighted: 权重调度
  - custom: 自定义策略

故障处理:
  - 自动故障检测
  - 智能故障转移
  - 降级策略
  - 恢复机制
```

### 🚀 企微深度集成

#### 👤 账号生命周期管理
```yaml
9状态生命周期:
  CREATED: 账号创建
  INITIALIZING: 初始化中
  WAITING_QR: 等待二维码
  WAITING_CONFIRM: 等待确认
  VERIFYING: 验证中
  ONLINE: 在线状态
  OFFLINE: 离线状态
  ERROR: 错误状态
  RECOVERING: 恢复中

自动化管理:
  - 状态自动检测
  - 异常自动恢复
  - 健康评分
  - 生命周期统计
```

#### 💬 智能消息管理
- **全类型消息**: 文本、图片、视频、文件、语音等
- **批量操作**: 群发、定时发送、模板消息
- **消息跟踪**: 发送状态、阅读状态、交互分析
- **智能路由**: 根据负载自动选择最优账号

### 💼 服务类商品体系

#### 🛒 服务商品管理
- **服务分类**: 多级分类，支持自定义属性
- **服务变体**: 不同规格、时长、价格的服务变体
- **动态定价**: 基于时间、需求的动态定价策略
- **容量管理**: 实时容量监控和预警

#### 📅 预约调度系统
- **时段管理**: 灵活的时间段配置和容量控制
- **智能调度**: 自动分配服务提供商
- **改期取消**: 完整的改期历史和取消政策
- **冲突检测**: 预约冲突自动检测和解决

### 👥 客户全生命周期管理

#### 🎯 客户360度视图
- **基础档案**: 完整的客户基本信息和联系方式
- **行为轨迹**: 完整的客户行为路径分析
- **价值评估**: 客户价值评分和生命周期价值
- **偏好分析**: 基于行为的偏好和需求分析

#### 🏷️ 智能标签系统
- **自动标签**: 基于行为的自动标签分配
- **规则引擎**: 灵活的标签规则配置
- **标签继承**: 标签的层级关系和继承机制
- **效果评估**: 标签效果统计和优化建议

---

## 🛠️ 技术栈

### 后端技术栈
```yaml
核心框架:
  - Spring Boot 3.2.0: 微服务基础框架
  - Spring Cloud 2023.0.0: 微服务治理
  - Spring Security: 安全框架
  - MyBatis-Plus: ORM框架

数据存储:
  - MySQL 8.0: 主要业务数据
  - Redis 7.0: 缓存和会话存储
  - InfluxDB 2.0: 时序数据存储
  - MongoDB: 文档型数据存储
  - MinIO: 对象存储

中间件:
  - RocketMQ 5.0: 消息队列
  - Nacos 2.3.2: 服务发现和配置
  - Sentinel: 流量控制和熔断
  - Seata: 分布式事务
```

### 前端技术栈
```yaml
核心框架:
  - Vue 3: 前端框架
  - TypeScript: 类型安全
  - Vite: 构建工具
  - Pinia: 状态管理

UI组件:
  - Element Plus: UI组件库
  - ECharts: 数据可视化
  - Monaco Editor: 代码编辑器
  - Vue-Cropper: 图片裁剪
```

---

## 🚀 快速开始

### 📋 环境要求
```yaml
基础环境:
  - JDK 17+
  - Node.js 18+
  - Docker 20+
  - Kubernetes 1.24+

数据库:
  - MySQL 8.0+
  - Redis 7.0+
  - InfluxDB 2.0+
```

### 🛠️ 本地开发
```bash
# 1. 克隆代码
git clone <repository-url>
cd we-work-api

# 2. 启动基础服务
docker-compose -f infrastructure/docker/docker-compose.yml up -d

# 3. 初始化数据库
mysql -u root -p < docs/02-系统设计/database-scripts/01-saas-unified-core.sql
mysql -u root -p < docs/02-系统设计/database-scripts/02-ai-agent-platform.sql
# ... 其他数据库脚本

# 4. 启动后端服务
cd backend
mvn spring-boot:run

# 5. 启动前端应用
cd frontend/admin-web
npm install
npm run dev
```

---

## 📚 相关文档

- [📖 技术架构分析](../02-系统设计/TECHNICAL_ARCHITECTURE_ANALYSIS.md)
- [💾 数据库设计脚本](../02-系统设计/database-scripts/)
- [🔌 API接口设计](../03-架构设计/API_INTERFACE_DESIGN.md)
- [🏢 业务模块设计](../04-业务模块/)
- [🔒 安全架构设计](../05-安全性能/SECURITY_ARCHITECTURE_DESIGN.md)
- [🚀 部署架构设计](../06-部署运维/DEPLOYMENT_ARCHITECTURE_DESIGN.md)

---

**📅 最后更新**: 2025年1月 | **🚀 版本**: v1.0 | **📝 文档版本**: v2.0

🎉 **企业级SaaS服务平台，助力企业数字化转型！**