<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wework.platform.message.repository.MessageTemplateRepository">

    <!-- updateTemplateUsageStats -->
    <update id="updateTemplateUsageStats">
        "&lt;script&gt;" +
        "UPDATE message_templates SET " +
        "use_count = use_count + 1, " +
        "&lt;if test='success'&gt;" +
        "  success_count = success_count + 1, " +
        "&lt;/if&gt;" +
        "&lt;if test='!success'&gt;" +
        "  fail_count = fail_count + 1, " +
        "&lt;/if&gt;" +
        "updated_at = NOW(
    </update>

    <!-- countByTenantId -->
    <select id="countByTenantId" resultType="long">
        "SELECT COUNT(*
    </select>

</mapper>