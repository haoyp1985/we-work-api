<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wework.platform.agent.repository.MessageRepository">

    <!-- selectMaxSequenceByConversation -->
    <select id="selectMaxSequenceByConversation" resultType="com.wework.platform.agent.entity.Integer">
        "SELECT COALESCE(MAX(sequence_number
    </select>

    <!-- countByConversation -->
    <select id="countByConversation" resultType="long">
        "SELECT COUNT(*
    </select>

    <!-- sumTokensByConversation -->
    <select id="sumTokensByConversation" resultType="com.wework.platform.agent.entity.Long">
        "SELECT COALESCE(SUM(tokens
    </select>

    <!-- SUM -->
    <select id="SUM">
        {
        "&lt;script&gt;",
        "SELECT",
        "COUNT(*
    </select>

</mapper>