# WeWork Platform 前端配置修复指南

## 🚨 端口不匹配问题

由于后端服务端口从 `8080/8081/8082` 更改为 `18080/18081/18082`，需要同步更新前端配置。

## 🔧 修复步骤

### 1. 创建前端环境配置文件

在 `frontend/admin-web/` 目录下创建 `.env.development` 文件：

```bash
cd frontend/admin-web/
cat > .env.development << 'EOF'
# WeWork Platform 前端开发环境配置
# 注意：端口已更新为18080避免冲突

# 应用标题
VITE_APP_TITLE=WeWork Platform

# API基础URL - 指向Gateway服务
VITE_APP_BASE_API=http://localhost:18080/api

# 上传URL
VITE_APP_UPLOAD_URL=http://localhost:18080/api/upload

# WebSocket URL  
VITE_APP_SOCKET_URL=ws://localhost:18080/ws

# 环境标识
VITE_APP_ENV=development
EOF
```

### 2. 验证Vite代理配置

检查 `frontend/admin-web/vite.config.ts` 中的代理配置：

```typescript
server: {
  host: '0.0.0.0',
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:18080',  // ✅ 已正确
      changeOrigin: true,
      rewrite: (path) => path
    }
  }
}
```

### 3. 启动前端项目

```bash
cd frontend/admin-web/
npm install
npm run dev
```

前端将运行在: http://localhost:3000

## 🎯 API路由映射

| 前端请求 | Gateway路由 | 目标服务 |
|---------|------------|---------|
| `/api/health` | → Gateway健康检查 | Gateway (18080) |
| `/api/account/*` | → Account服务 | Account (18081) |
| `/api/message/*` | → Message服务 | Message (18082) |

## ✅ 验证步骤

1. **后端健康检查**:
   ```bash
   curl http://localhost:18080/api/health
   curl http://localhost:18081/api/health  
   curl http://localhost:18082/api/health
   ```

2. **前端代理测试**:
   - 启动前端: `npm run dev`
   - 访问: http://localhost:3000
   - 查看浏览器Network面板确认API调用正确

## 🔄 需要手动更新的Nacos配置

请在Nacos控制台更新 `gateway-service-dev.yml` 配置，添加Gateway健康检查路由。

完成这些步骤后，前后端接口将完全匹配！