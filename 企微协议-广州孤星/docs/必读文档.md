# 必读文档（问问题前先看完这里）

# 登录流程

1.创建实例（测试阶段找联系人代创建实例 GUID）
2.设置实例回调
3.使用本地代理获取ID
4.设置实例本地代理ID
5.获取登录二维码(跳过3 4会导致异地登录)

# 概念说明

## 实例
创建实例相当于创建了一个虚拟机器，一个实例只登录一个号，如需登录其他账号请重新创建实例，不用的实例可以删除。

## 登录
原则上扫码确认后即可登录，无需调用 manual_login 和 keep_login

## 云存储
云存储可以把文件直接上传到阿里云或腾讯云，开发者无需二次开发这部分

## CDN
该部分可以把文件下载到服务器本地，再自行处理具体逻辑

# ID 说明
微信的外部联系人开头为 788

企微用户的开头为 168（无论是自己企业还是他人企业）

外部群一般为 10 开头

这里的ID不会因为不同用户、不同企业改变而改变，都是固定值

发送消息的 conversation_id 为 
* 私聊 `S:788xxxxx` 
* 群聊 `R:10xxxxxxxx`

## 开放平台

开放平台部分的文档可以跟自建应用的外部联系人ID打通

# 消息

## referid

referid 为0 证明是原消息，不为0 时 referID 等于消息 ID，证明消息有过变动。

# CDN

## 下载

### file_id（某些场景字段名可能为URL）
* https://wework.qpic.cn 开头的可以直接访问
* 30 开头的需要使用 C2C 接口下载
* 其他 https:// 的使用微信CDN下载

## 上传

* 消息使用 C2C 

## 上传

* 消息使用 C2C 上传
    * 图片：2
    * 小程序封面：1
    * 视频：4
    * 文件、语音：5
* 朋友圈资源使用 BIG CDN
* 朋友圈资源使用 BIG CDN
